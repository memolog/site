<!doctype html>
<html lang="ja">
<head>
  <title>Bubble Sort in JavaScript | メモログ</title>
    <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="shortcut icon" href="/assets/icons/icon-32.ico">
  <style>body {
  background-color: white;
  color: black;
  font-family: 'Hiragino Kaku Gothic Pro',  YuGothic, 'Yu Gothic', sans-serif;
  margin: 0;
  padding: 0;
}

a {
  color: darkred;
}

a:visited {
  color: rebeccapurple;
}

.header {
  margin: 0 auto;
  font-family: Garamond, 'Times New Roman', serif; }

.header_component_global {
  text-align: center;
  margin: 1em 0;
}

.header__title {
  display: inline-block;
  background-color: #f5f2f0;
  margin: .2em 0 .2em;
  padding: 5px;
  font-size: 1.8em;
  font-weight: normal;
  vertical-align: bottom;
}

.header__title a {
  color: black;
  text-decoration: none;
}

.header_component_global .header__title {
  font-size: 1.2em;
}

.header_component_global .header__title a {
  text-decoration: none;
  color: black;
}

.header__description {
  margin-top: 0;
  margin-bottom: 1em; }

.header_component_global .header__description {
  color: #666;
  margin: 0 auto;
  padding: 0 5px; }

.header__epigraph {
  font-style: italic;
  color: #666;
  margin: 0 auto;
  padding: 5px; }

.container {
  max-width: 900px;
  margin: 0 auto 4em;
  padding: 0 15px;
  border-radius: 3px;
}

.content {
  font-size: 1.1em;
  line-height: 2em;
  color: #444;
  -webkit-font-smoothing: antialiased;
}

.content h2,
.content h3 {
  font-size: 1.4em;
  margin: 2em 0 0 0;
  border-bottom: 1px solid #ddd;
}

.article-summary {
  margin-bottom: 3.5em;
}

.header time {
  display: inline-block;
  font-size: .9125em;
  color: #666;
}

.calendar-icon, .author-icon {
  margin-right: .5em;
}

.content blockquote {
  border: 5px solid #ddd;
  background: #f9f9f9;
  margin: 1.5em 1em;
  padding: 0 1em;
}

.content p > code {
  background-color: #f5f2f0;
  display: inline-block;
  padding: 0 6px;
  border-radius: .3em;
  color:#444;
}

.content code[class*="language-"] {
  color: #444;
}

@media screen and (max-width: 500px) {
  .header__epigraph {
    display: none;
  }

  .header__title {
    font-size: 1.2em;
  }

  .content h2 {
    font-size: 1.2em;
  }

  .content {
    font-size: 1em;
  }
}

.header__feature {
  margin: .5em 0 -.5em;
}

.header__feature img {
  max-width: 100%;
  overflow: hidden;
}

.featured__image {
  background: white;
  line-height: 0;
  max-height: 430px;
  overflow: hidden;
}

.featured__credit {
  color: #666;
  font-size: .825em;
  text-align: right;
  margin-top: .5em;
}

.lazyload,
.lazyloading {
	opacity: 0.5;
}

.lazyloaded {
	opacity: 1;
	transition: opacity 2s .3s cubic-bezier(.3,.18,.15,1);
}

.content img {
  max-width: 100%;
}

.youtube-wrapper {
  position: relative;
  display: block;
  height: 0;
  padding: 0;
  overflow: hidden;
  padding-bottom: 56.25%;
}

.youtube-wrapper iframe {
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0;
  height: 100%;
  width: 100%;
  border: 0;
}

@media screen and (max-width: 900px) {
  .featured__image,
  .content__image,
  .content pre[class*="language-"],
  .youtube-wrapper {
    margin: 0 -15px;
  }
}

@media screen and (max-width: 900px) {
  .featured__image,
  .content__image,
  .content pre[class*="language-"] {
    margin: 0 -15px;
  }
}

.link-icon {
  background-position-x: 4px;
  background-position-y: center;
  background-repeat: no-repeat;
  padding-left: 24px;
}

.post .writing-vertical {
  writing-mode: vertical-rl;
  font-family: serif;
  font-size: 1em;
  margin: 1.5em 0;
  column-count: 2;
  max-width: 900px;
  width: 102%;
  overflow: auto;
  height: 800px;
}

.post .writing-vertical p {
  margin: 0;
}

.post .writing-vertical p a {
  padding-left: 0px;
  padding-top: 24px;
}

.post .writing-vertical p:first-letter {
  margin-top: 1em;
}

.post .writing-vertical .link-icon {
  background-position-x: center;
  background-position-y: 5px;
}

.post .writing-vertical blockquote {
  border: none;
  margin: 0 .5em;
  padding: 1em .5em;
  background: #f0f0f0;
}

@media screen and (max-width: 930px) {
  .post .writing-vertical {
    margin-left: 0;
    margin-right: 0;
    width: 100%;
  }
}
</style>
  <script>window.lazyLoadOptions = {};</script>
  <link rel="preload" as="style" href="/css/global_async.css" onload="this.rel='stylesheet'">
  <link rel="alternate" href="http://feeds.feedburner.com/jp/memolog" title="Latest Articles">
  <link rel="manifest" href="/manifest.json" >
  <meta name="theme-color" content="white">

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-955153-2"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-955153-2');
  </script>
  <script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@graph":
    [
      {
        "@context": "http://schema.org",
        "@type": "Organization",
        "url": "http://memolog.org",
        "logo": "https://memolog.org/assets/icons/icon-1024.png"
      },
      {
        "@context": "http://schema.org",
        "@type": "Person",
        "name": "Yutaka Yamaguchi",
        "url": "http://memolog.org",
        "sameAs": [
          "https://www.facebook.com/yutaka.yamaguchi",
          "https://www.linkedin.com/in/yutakayamaguchi/",
          "https://twitter.com/memolog"
        ]
      }
    ]
  }
  </script>

  <meta name="description" content="Array.prototype.sort についてとTypedArray.prototype.sort についてで書いたようにビルトインされているsortメソッドが効率的なソートを実行できるように実装されているので、JavaScript上で自前のソートを実装する意味はあまりないのだけど、試しにバブルソートをJavaScript上で作ってみた。">
<meta property="og:type" content="article">
<meta property="og:title" content="Bubble Sort in JavaScript">
<meta property="og:url" content="https://memolog.org/2018/bubble-sort-in-javascript.html">
<meta property="og:site_name" content="メモログ">
<meta property="og:description" content="Array.prototype.sort についてとTypedArray.prototype.sort についてで書いたようにビルトインされているsortメソッドが効率的なソートを実行できるように実装されているので、JavaScript上で自前のソートを実装する意味はあまりないのだけど、試しにバブルソートをJavaScript上で作ってみた。">
<meta property="og:locale" content="ja">
<meta property="og:image" content="https://memolog.org/assets/images/jong-marshes-458354-unsplash/jong-marshes-458354-unsplash.jpg">
<meta property="og:updated_time" content="2019-01-04T02:09:12.874Z">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Bubble Sort in JavaScript">
<meta name="twitter:description" content="Array.prototype.sort についてとTypedArray.prototype.sort についてで書いたようにビルトインされているsortメソッドが効率的なソートを実行できるように実装されているので、JavaScript上で自前のソートを実装する意味はあまりないのだけど、試しにバブルソートをJavaScript上で作ってみた。">
<meta name="twitter:image" content="https://memolog.org/assets/images/jong-marshes-458354-unsplash/jong-marshes-458354-unsplash.jpg">
<meta name="twitter:creator" content="@memolog">
<meta name="twitter:site" content="https://twitter.com/memolog">
<meta property="fb:app_id" content="168245123786587">
  <link rel="canonical" href="https://memolog.org/2018/bubble-sort-in-javascript.html">
  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "BlogPosting",
      "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://memolog.org/2018/bubble-sort-in-javascript.html"
      },
      "headline": "Bubble Sort in JavaScript",
      
        "image": [
          "https://memolog.org/assets/images/jong-marshes-458354-unsplash/jong-marshes-458354-unsplash.jpg"
        ],
      
      "datePublished": "Sat Aug 04 2018 07:00:11 GMT+0900",
      "dateModified": "Fri Jan 04 2019 11:09:12 GMT+0900",
      "author": {
        "@type": "Person",
        "name": "Yutaka Yamaguchi"
      },
      "publisher": {
        "@type": "Organization",
        "name": "メモログ",
        "logo": {
          "@type": "ImageObject",
          "url": "https://memolog.org/assets/icons/icon-1024.png"
        }
      },
      "description": "Array.prototype.sort についてとTypedArray.prototype.sort についてで書いたようにビルトインされているsortメソッドが効率的なソートを実行できるように実装されているので、JavaScript上で自前のソートを実装する意味はあまりないのだけど、試しにバブルソートをJavaScript上で作ってみた。"
    }
  </script>
</head>
<body class="post">
    <header class="header header_component_global">
    <div class="header__icon" aria-hidden="true"><img src="/assets/icons/icon.svg" role="presentation" width="48" height="48" alt="icon"></div>
    <h1 class="header__title header__title"><a href="/">メモログ</a></h1>
    <p class="header__description">💡 Personal notes about somthing I&#39;m interested in</p>
    <aside aria-hidden="true"><blockquote class="header__epigraph">Well, he fuffed, and he puffed, and he huffed and he puffed, and he puffed and huffed; but he could not get the house down.</blockquote></aside>
    <nav class="navigation navigation-global">
      <a href="/" class="navigation__link">📘 Latest Articles</a>
    </nav>
  </header>

  <div class="container">
    <main class="main">
      <article>
        <header class="header">
          <div>
            <time datetime="2018-08-03T22:00:11.000Z">
              <span class="calendar-icon">📅</span><span>2018年8月4日</span>
            </time>
          </div>
          <h2 class="header__title">Bubble Sort in JavaScript</h2>
          
            <div class="header__feature" aria-hidden="true">
  <div class="featured__image">
    
      
        <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIgd2lkdGg9IjEwMjQiIGhlaWdodD0iNzY4Ij48cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iMTAyNCIgaGVpZ2h0PSI3NjgiIGZpbGw9IiMyNjY1N2EiIC8+PC9zdmc+" data-src="/assets/images/jong-marshes-458354-unsplash/jong-marshes-458354-unsplash.svg" class="lazyload blur-up" alt="" role="presentation" />
      
    
  </div>
  
    <div class="featured__credit">Original Photo by <a href="https://unsplash.com/photos/79mNMAvSORg?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" target="_blank" rel="noopener">Jong Marshes</a> on <a href="https://unsplash.com/?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText" target="_blank" rel="noopener">Unsplash</a></div>
  
</div>

          
        </header>
        <div id="article-content" class="content "><p><a href="https://memolog.org/2018/about-array-prototype-sort.html">Array.prototype.sort について</a>と<a href="https://memolog.org/2018/about-typedarray-prototype-sort.html">TypedArray.prototype.sort について</a>で書いたようにビルトインされているsortメソッドが効率的なソートを実行できるように実装されているので、JavaScript上で自前のソートを実装する意味はあまりないのだけど、試しにバブルソートをJavaScript上で作ってみた。<a id="more"></a></p>
<p><a href="https://en.wikipedia.org/wiki/Bubble_sort" target="_blank" rel="noopener">バブルソート</a>は隣り合う値を比較して順序が異なる場合は順番を入れ替える（swap）、ということを繰り返し行う。swapする必要がなくなったらソート終了となる。実装は簡単だけど繰り返しの数が多く実行速度が遅いので実践で使われることはない。でも悪い例みたいのでよく登場する。</p>
<p>下の動画はバブルソートをハンガリアンフォークダンスで表現したもの。うける。開始50秒くらいはただ踊ってるだけである。左から進んで、隣り合う人同士で数値を比較して、大きい人が右側に移動していく。</p>
<div class="youtube-wrapper">
  <iframe width="560" height="315" src="https://www.youtube.com/embed/lyZQPjUT5B4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen title="Bubble-sort with Hungarian (Csángó" )"=""></iframe>
  </div>
<p>ポイントとしては、</p>
<ul>
<li>先頭から最後まですべての値を比較して、大きい数値を右に移動（swap）していく。</li>
<li>上記をswapする必要がなくなるまで上記を繰り返す。ただし比較した最後の値は（その中で一番大きな値なので）次の繰り返しでは比較しなくていい。</li>
<li>最後の値からswapしなかった箇所は大きな数値順に並んでいる状態なので、次の繰り返しでは比較しなくていい。</li>
</ul>
<blockquote>
<p><strong>Optimizing bubble sort</strong><br>The bubble sort algorithm can be easily optimized by observing that the n-th pass finds the n-th largest element and puts it into its final place. So, the inner loop can avoid looking at the last n − 1 items when running for the n-th time:</p>
<p>More generally, it can happen that more than one element is placed in their final position on a single pass. In particular, after every pass, all elements after the last swap are sorted, and do not need to be checked again. This allows us to skip over a lot of the elements, resulting in about a worst case 50% improvement in comparison count (though no improvement in swap counts), and adds very little complexity because the new code subsumes the “swapped” variable:<br><a href="https://en.wikipedia.org/wiki/Bubble_sort" target="_blank" rel="noopener">https://en.wikipedia.org/wiki/Bubble_sort</a></p>
</blockquote>
<p>実装例は<a href="https://en.wikipedia.org/wiki/Bubble_sort" target="_blank" rel="noopener">バブルソート</a>のwikiや<a href="http://blog.benoitvallon.com/sorting-algorithms-in-javascript/the-bubble-sort-algorithm/" target="_blank" rel="noopener">The Bubble sort algorithm - Ben’s Blog</a>などにもあるけど、実装してみたコードは下記。</p>
<pre class="line-numbers language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">bubbleSortTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">const</span> arrayLength <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> array <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>arrayLength<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    array<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>array<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">bubbleSort</span><span class="token punctuation">(</span>array<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">bubbleSort</span><span class="token punctuation">(</span>array<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> arrayLength <span class="token operator">=</span> array<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> swapped<span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span>arrayLength<span class="token punctuation">;</span> i<span class="token operator">></span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    swapped <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">let</span> j<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> j<span class="token operator">&lt;</span>i<span class="token punctuation">;</span> j<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> a <span class="token operator">=</span> array<span class="token punctuation">[</span>j<span class="token number">-1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> b <span class="token operator">=</span> array<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">></span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        array<span class="token punctuation">[</span>j<span class="token number">-1</span><span class="token punctuation">]</span> <span class="token operator">=</span> b<span class="token punctuation">;</span>
        array<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">;</span>
        swapped <span class="token operator">=</span> j<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      count<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>swapped<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      i <span class="token operator">=</span> swapped <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>array<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`number of iterates: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>実行例</p>
<pre class="line-numbers language-javascript"><code class="language-javascript"><span class="token operator">></span> <span class="token function">bubbleSortTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span> <span class="token number">5839</span><span class="token punctuation">,</span> <span class="token number">1225</span><span class="token punctuation">,</span> <span class="token number">6856</span><span class="token punctuation">,</span> <span class="token number">5969</span><span class="token punctuation">,</span> <span class="token number">1429</span><span class="token punctuation">,</span> <span class="token number">1063</span><span class="token punctuation">,</span> <span class="token number">4480</span><span class="token punctuation">,</span> <span class="token number">1099</span><span class="token punctuation">,</span> <span class="token number">7652</span><span class="token punctuation">,</span> <span class="token number">8717</span> <span class="token punctuation">]</span>
<span class="token punctuation">[</span> <span class="token number">1225</span><span class="token punctuation">,</span> <span class="token number">5839</span><span class="token punctuation">,</span> <span class="token number">5969</span><span class="token punctuation">,</span> <span class="token number">1429</span><span class="token punctuation">,</span> <span class="token number">1063</span><span class="token punctuation">,</span> <span class="token number">4480</span><span class="token punctuation">,</span> <span class="token number">1099</span><span class="token punctuation">,</span> <span class="token number">6856</span><span class="token punctuation">,</span> <span class="token number">7652</span><span class="token punctuation">,</span> <span class="token number">8717</span> <span class="token punctuation">]</span>
<span class="token punctuation">[</span> <span class="token number">1225</span><span class="token punctuation">,</span> <span class="token number">5839</span><span class="token punctuation">,</span> <span class="token number">1429</span><span class="token punctuation">,</span> <span class="token number">1063</span><span class="token punctuation">,</span> <span class="token number">4480</span><span class="token punctuation">,</span> <span class="token number">1099</span><span class="token punctuation">,</span> <span class="token number">5969</span><span class="token punctuation">,</span> <span class="token number">6856</span><span class="token punctuation">,</span> <span class="token number">7652</span><span class="token punctuation">,</span> <span class="token number">8717</span> <span class="token punctuation">]</span>
<span class="token punctuation">[</span> <span class="token number">1225</span><span class="token punctuation">,</span> <span class="token number">1429</span><span class="token punctuation">,</span> <span class="token number">1063</span><span class="token punctuation">,</span> <span class="token number">4480</span><span class="token punctuation">,</span> <span class="token number">1099</span><span class="token punctuation">,</span> <span class="token number">5839</span><span class="token punctuation">,</span> <span class="token number">5969</span><span class="token punctuation">,</span> <span class="token number">6856</span><span class="token punctuation">,</span> <span class="token number">7652</span><span class="token punctuation">,</span> <span class="token number">8717</span> <span class="token punctuation">]</span>
<span class="token punctuation">[</span> <span class="token number">1225</span><span class="token punctuation">,</span> <span class="token number">1063</span><span class="token punctuation">,</span> <span class="token number">1429</span><span class="token punctuation">,</span> <span class="token number">1099</span><span class="token punctuation">,</span> <span class="token number">4480</span><span class="token punctuation">,</span> <span class="token number">5839</span><span class="token punctuation">,</span> <span class="token number">5969</span><span class="token punctuation">,</span> <span class="token number">6856</span><span class="token punctuation">,</span> <span class="token number">7652</span><span class="token punctuation">,</span> <span class="token number">8717</span> <span class="token punctuation">]</span>
<span class="token punctuation">[</span> <span class="token number">1063</span><span class="token punctuation">,</span> <span class="token number">1225</span><span class="token punctuation">,</span> <span class="token number">1099</span><span class="token punctuation">,</span> <span class="token number">1429</span><span class="token punctuation">,</span> <span class="token number">4480</span><span class="token punctuation">,</span> <span class="token number">5839</span><span class="token punctuation">,</span> <span class="token number">5969</span><span class="token punctuation">,</span> <span class="token number">6856</span><span class="token punctuation">,</span> <span class="token number">7652</span><span class="token punctuation">,</span> <span class="token number">8717</span> <span class="token punctuation">]</span>
<span class="token punctuation">[</span> <span class="token number">1063</span><span class="token punctuation">,</span> <span class="token number">1099</span><span class="token punctuation">,</span> <span class="token number">1225</span><span class="token punctuation">,</span> <span class="token number">1429</span><span class="token punctuation">,</span> <span class="token number">4480</span><span class="token punctuation">,</span> <span class="token number">5839</span><span class="token punctuation">,</span> <span class="token number">5969</span><span class="token punctuation">,</span> <span class="token number">6856</span><span class="token punctuation">,</span> <span class="token number">7652</span><span class="token punctuation">,</span> <span class="token number">8717</span> <span class="token punctuation">]</span>
number <span class="token keyword">of</span> iterates<span class="token punctuation">:</span> <span class="token number">30</span>

<span class="token operator">></span> <span class="token function">bubbleSortTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span> <span class="token number">1031</span><span class="token punctuation">,</span> <span class="token number">5942</span><span class="token punctuation">,</span> <span class="token number">4589</span><span class="token punctuation">,</span> <span class="token number">9940</span><span class="token punctuation">,</span> <span class="token number">709</span><span class="token punctuation">,</span> <span class="token number">8621</span><span class="token punctuation">,</span> <span class="token number">4132</span><span class="token punctuation">,</span> <span class="token number">3874</span><span class="token punctuation">,</span> <span class="token number">5777</span><span class="token punctuation">,</span> <span class="token number">7329</span> <span class="token punctuation">]</span>
<span class="token punctuation">[</span> <span class="token number">1031</span><span class="token punctuation">,</span> <span class="token number">4589</span><span class="token punctuation">,</span> <span class="token number">5942</span><span class="token punctuation">,</span> <span class="token number">709</span><span class="token punctuation">,</span> <span class="token number">8621</span><span class="token punctuation">,</span> <span class="token number">4132</span><span class="token punctuation">,</span> <span class="token number">3874</span><span class="token punctuation">,</span> <span class="token number">5777</span><span class="token punctuation">,</span> <span class="token number">7329</span><span class="token punctuation">,</span> <span class="token number">9940</span> <span class="token punctuation">]</span>
<span class="token punctuation">[</span> <span class="token number">1031</span><span class="token punctuation">,</span> <span class="token number">4589</span><span class="token punctuation">,</span> <span class="token number">709</span><span class="token punctuation">,</span> <span class="token number">5942</span><span class="token punctuation">,</span> <span class="token number">4132</span><span class="token punctuation">,</span> <span class="token number">3874</span><span class="token punctuation">,</span> <span class="token number">5777</span><span class="token punctuation">,</span> <span class="token number">7329</span><span class="token punctuation">,</span> <span class="token number">8621</span><span class="token punctuation">,</span> <span class="token number">9940</span> <span class="token punctuation">]</span>
<span class="token punctuation">[</span> <span class="token number">1031</span><span class="token punctuation">,</span> <span class="token number">709</span><span class="token punctuation">,</span> <span class="token number">4589</span><span class="token punctuation">,</span> <span class="token number">4132</span><span class="token punctuation">,</span> <span class="token number">3874</span><span class="token punctuation">,</span> <span class="token number">5777</span><span class="token punctuation">,</span> <span class="token number">5942</span><span class="token punctuation">,</span> <span class="token number">7329</span><span class="token punctuation">,</span> <span class="token number">8621</span><span class="token punctuation">,</span> <span class="token number">9940</span> <span class="token punctuation">]</span>
<span class="token punctuation">[</span> <span class="token number">709</span><span class="token punctuation">,</span> <span class="token number">1031</span><span class="token punctuation">,</span> <span class="token number">4132</span><span class="token punctuation">,</span> <span class="token number">3874</span><span class="token punctuation">,</span> <span class="token number">4589</span><span class="token punctuation">,</span> <span class="token number">5777</span><span class="token punctuation">,</span> <span class="token number">5942</span><span class="token punctuation">,</span> <span class="token number">7329</span><span class="token punctuation">,</span> <span class="token number">8621</span><span class="token punctuation">,</span> <span class="token number">9940</span> <span class="token punctuation">]</span>
<span class="token punctuation">[</span> <span class="token number">709</span><span class="token punctuation">,</span> <span class="token number">1031</span><span class="token punctuation">,</span> <span class="token number">3874</span><span class="token punctuation">,</span> <span class="token number">4132</span><span class="token punctuation">,</span> <span class="token number">4589</span><span class="token punctuation">,</span> <span class="token number">5777</span><span class="token punctuation">,</span> <span class="token number">5942</span><span class="token punctuation">,</span> <span class="token number">7329</span><span class="token punctuation">,</span> <span class="token number">8621</span><span class="token punctuation">,</span> <span class="token number">9940</span> <span class="token punctuation">]</span>
number <span class="token keyword">of</span> iterates<span class="token punctuation">:</span> <span class="token number">34</span>

<span class="token operator">></span> <span class="token function">bubbleSortTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span> <span class="token number">8733</span><span class="token punctuation">,</span> <span class="token number">1776</span><span class="token punctuation">,</span> <span class="token number">7538</span><span class="token punctuation">,</span> <span class="token number">9281</span><span class="token punctuation">,</span> <span class="token number">9712</span><span class="token punctuation">,</span> <span class="token number">9931</span><span class="token punctuation">,</span> <span class="token number">9236</span><span class="token punctuation">,</span> <span class="token number">1486</span><span class="token punctuation">,</span> <span class="token number">8151</span><span class="token punctuation">,</span> <span class="token number">612</span> <span class="token punctuation">]</span>
<span class="token punctuation">[</span> <span class="token number">1776</span><span class="token punctuation">,</span> <span class="token number">7538</span><span class="token punctuation">,</span> <span class="token number">8733</span><span class="token punctuation">,</span> <span class="token number">9281</span><span class="token punctuation">,</span> <span class="token number">9712</span><span class="token punctuation">,</span> <span class="token number">9236</span><span class="token punctuation">,</span> <span class="token number">1486</span><span class="token punctuation">,</span> <span class="token number">8151</span><span class="token punctuation">,</span> <span class="token number">612</span><span class="token punctuation">,</span> <span class="token number">9931</span> <span class="token punctuation">]</span>
<span class="token punctuation">[</span> <span class="token number">1776</span><span class="token punctuation">,</span> <span class="token number">7538</span><span class="token punctuation">,</span> <span class="token number">8733</span><span class="token punctuation">,</span> <span class="token number">9281</span><span class="token punctuation">,</span> <span class="token number">9236</span><span class="token punctuation">,</span> <span class="token number">1486</span><span class="token punctuation">,</span> <span class="token number">8151</span><span class="token punctuation">,</span> <span class="token number">612</span><span class="token punctuation">,</span> <span class="token number">9712</span><span class="token punctuation">,</span> <span class="token number">9931</span> <span class="token punctuation">]</span>
<span class="token punctuation">[</span> <span class="token number">1776</span><span class="token punctuation">,</span> <span class="token number">7538</span><span class="token punctuation">,</span> <span class="token number">8733</span><span class="token punctuation">,</span> <span class="token number">9236</span><span class="token punctuation">,</span> <span class="token number">1486</span><span class="token punctuation">,</span> <span class="token number">8151</span><span class="token punctuation">,</span> <span class="token number">612</span><span class="token punctuation">,</span> <span class="token number">9281</span><span class="token punctuation">,</span> <span class="token number">9712</span><span class="token punctuation">,</span> <span class="token number">9931</span> <span class="token punctuation">]</span>
<span class="token punctuation">[</span> <span class="token number">1776</span><span class="token punctuation">,</span> <span class="token number">7538</span><span class="token punctuation">,</span> <span class="token number">8733</span><span class="token punctuation">,</span> <span class="token number">1486</span><span class="token punctuation">,</span> <span class="token number">8151</span><span class="token punctuation">,</span> <span class="token number">612</span><span class="token punctuation">,</span> <span class="token number">9236</span><span class="token punctuation">,</span> <span class="token number">9281</span><span class="token punctuation">,</span> <span class="token number">9712</span><span class="token punctuation">,</span> <span class="token number">9931</span> <span class="token punctuation">]</span>
<span class="token punctuation">[</span> <span class="token number">1776</span><span class="token punctuation">,</span> <span class="token number">7538</span><span class="token punctuation">,</span> <span class="token number">1486</span><span class="token punctuation">,</span> <span class="token number">8151</span><span class="token punctuation">,</span> <span class="token number">612</span><span class="token punctuation">,</span> <span class="token number">8733</span><span class="token punctuation">,</span> <span class="token number">9236</span><span class="token punctuation">,</span> <span class="token number">9281</span><span class="token punctuation">,</span> <span class="token number">9712</span><span class="token punctuation">,</span> <span class="token number">9931</span> <span class="token punctuation">]</span>
<span class="token punctuation">[</span> <span class="token number">1776</span><span class="token punctuation">,</span> <span class="token number">1486</span><span class="token punctuation">,</span> <span class="token number">7538</span><span class="token punctuation">,</span> <span class="token number">612</span><span class="token punctuation">,</span> <span class="token number">8151</span><span class="token punctuation">,</span> <span class="token number">8733</span><span class="token punctuation">,</span> <span class="token number">9236</span><span class="token punctuation">,</span> <span class="token number">9281</span><span class="token punctuation">,</span> <span class="token number">9712</span><span class="token punctuation">,</span> <span class="token number">9931</span> <span class="token punctuation">]</span>
<span class="token punctuation">[</span> <span class="token number">1486</span><span class="token punctuation">,</span> <span class="token number">1776</span><span class="token punctuation">,</span> <span class="token number">612</span><span class="token punctuation">,</span> <span class="token number">7538</span><span class="token punctuation">,</span> <span class="token number">8151</span><span class="token punctuation">,</span> <span class="token number">8733</span><span class="token punctuation">,</span> <span class="token number">9236</span><span class="token punctuation">,</span> <span class="token number">9281</span><span class="token punctuation">,</span> <span class="token number">9712</span><span class="token punctuation">,</span> <span class="token number">9931</span> <span class="token punctuation">]</span>
<span class="token punctuation">[</span> <span class="token number">1486</span><span class="token punctuation">,</span> <span class="token number">612</span><span class="token punctuation">,</span> <span class="token number">1776</span><span class="token punctuation">,</span> <span class="token number">7538</span><span class="token punctuation">,</span> <span class="token number">8151</span><span class="token punctuation">,</span> <span class="token number">8733</span><span class="token punctuation">,</span> <span class="token number">9236</span><span class="token punctuation">,</span> <span class="token number">9281</span><span class="token punctuation">,</span> <span class="token number">9712</span><span class="token punctuation">,</span> <span class="token number">9931</span> <span class="token punctuation">]</span>
<span class="token punctuation">[</span> <span class="token number">612</span><span class="token punctuation">,</span> <span class="token number">1486</span><span class="token punctuation">,</span> <span class="token number">1776</span><span class="token punctuation">,</span> <span class="token number">7538</span><span class="token punctuation">,</span> <span class="token number">8151</span><span class="token punctuation">,</span> <span class="token number">8733</span><span class="token punctuation">,</span> <span class="token number">9236</span><span class="token punctuation">,</span> <span class="token number">9281</span><span class="token punctuation">,</span> <span class="token number">9712</span><span class="token punctuation">,</span> <span class="token number">9931</span> <span class="token punctuation">]</span>
number <span class="token keyword">of</span> iterates<span class="token punctuation">:</span> <span class="token number">45</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>バブルソートでは、大きな数値はどんどんswapされるので配列の最後に移動していくのは早く移動できるけど、小さな数値が配列の最初の方に移動するのは、一回の繰り返しで一つずつしか移動できないので遅い。動きの遅い小さな数値を「ウサギとカメ」になぞらえて、カメ（turtles）と呼んでいる。このカメを効率的になくしていくことでバブルソートの効率を改善することができる。</p>
<p><a href="https://en.wikipedia.org/wiki/Cocktail_shaker_sort" target="_blank" rel="noopener">Cacktail shaker sort（シェーカーソート）</a>では、最初から最後に向かって大きい数値を右に移動させた後に、反対方向（最後から最初）に向かって小さい数値を左に移動させる。これだと小さな数値が配列の最後にあった場合でも、効率的に移動させることができる。</p>
<p><a href="https://en.wikipedia.org/wiki/Comb_sort" target="_blank" rel="noopener">Comb sort（コムソート）</a>では、隣り合う数値ではなく間隔を空けた2つの数値を比較して、それらをswapさせる。これも小さな数値が配列の最後の方にあった場合に通常のバブルソートよりも早く移動させることができる。</p>
<blockquote>
<p><strong>Rabbits and turtles</strong><br>The distance and direction that elements must move during the sort determine bubble sort’s performance because elements move in different directions at different speeds. An element that must move toward the end of the list can move quickly because it can take part in successive swaps. For example, the largest element in the list will win every swap, so it moves to its sorted position on the first pass even if it starts near the beginning. On the other hand, an element that must move toward the beginning of the list cannot move faster than one step per pass, so elements move toward the beginning very slowly. If the smallest element is at the end of the list, it will take n−1 passes to move it to the beginning. This has led to these types of elements being named rabbits and turtles, respectively, after the characters in Aesop’s fable of The Tortoise and the Hare.<br><a href="https://en.wikipedia.org/wiki/Bubble_sort#Rabbits_and_turtles" target="_blank" rel="noopener">https://en.wikipedia.org/wiki/Bubble_sort#Rabbits_and_turtles</a></p>
</blockquote>
<p>以上。</p>
</div>
        <footer class="profile">
  <div class="profile-inner">
    <div class="profile__image"><img src="/assets/icons/icon.svg" role="presentation" width="48" height="48" alt="icon"></div>
    <h2 class="profile__heading">About the Author</h2>
    <div class="profile__content">
      <div>Yutaka Yamaguchi</div>
      <div>Mainly working for Web application (JavaScript), but also working for iOS application (Swift)</div>
      <ul class="profile__social-list">
        <li class="profile__social-list-item"><a href="https://twitter.com/memolog">Twitter</a></li>
        <li class="profile__social-list-item"><a href="https://www.linkedin.com/in/yutakayamaguchi/">LinkedIn</a></li>
        <li class="profile__social-list-item"><a href="https://www.facebook.com/yutaka.yamaguchi">Facebook</a></li>
      </ul>
    </div>
  </div>
</footer>

      </article>
    </main>
  </div>
  <script src="/js/lazysizes/lazysizes.min.js" async></script>
<script>
  // http://css-tricks.com/favicons-next-to-external-links/
  (function (){
    'use strict';
    if (/googlebot/i.test(navigator.userAgent)) {
      return;
    }
    const links = document.querySelectorAll('.content p a');
    const linkLength = links && links.length || 0;
    for (var i=0; i<linkLength; i++){
      const link = links[i];
      const hostname = link.hostname;
      if (hostname) {
        const children = link.children || [];
        const firstChild = children && children[0];
        if (firstChild && firstChild.tagName === 'IMG') {
          // For old amazon image link
          if (link.hostname === 'www.amazon.co.jp') {
            link.style.float = 'left';
            link.style.marginRight = '1em';
            link.style.paddingLeft = '0';
          }
          continue;
        }

        link.classList.add('link-icon');
        link.style.backgroundImage = `url(https://www.google.com/s2/favicons?domain=${hostname})`;
      }
    }
  })();
</script>
<script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('/service-worker.js');
  }
</script>

</body>
</html>
